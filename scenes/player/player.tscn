[gd_scene load_steps=10 format=3 uid="uid://blavsaulbsrwo"]

[ext_resource type="Script" path="res://scenes/player/player.gd" id="1_iiql7"]
[ext_resource type="PackedScene" uid="uid://c0tef407ni00e" path="res://scenes/ent/footsteps.tscn" id="2_2bqbd"]
[ext_resource type="Script" path="res://scenes/player/player_cam.gd" id="2_cpvu0"]
[ext_resource type="AudioStream" uid="uid://damo0hqg681" path="res://assets/audio/sfx/footsteps/stone/stone1.wav" id="3_xkka3"]
[ext_resource type="AudioStream" uid="uid://dgjoyd781mkqw" path="res://assets/audio/sfx/footsteps/stone/stone2.wav" id="4_p1ww4"]
[ext_resource type="AudioStream" uid="uid://byhooduhr20bk" path="res://assets/audio/sfx/footsteps/stone/stone3.wav" id="5_owa0i"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_gnlxt"]

[sub_resource type="Animation" id="Animation_aditl"]
resource_name = "crouch"

[sub_resource type="AnimationLibrary" id="AnimationLibrary_kdkn7"]
_data = {
"crouch": SubResource("Animation_aditl")
}

[node name="Player" type="CharacterBody3D"]
script = ExtResource("1_iiql7")

[node name="Footsteps" parent="." instance=ExtResource("2_2bqbd")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)
speed_scale = 1.4
sounds = Array[AudioStream]([ExtResource("3_xkka3"), ExtResource("4_p1ww4"), ExtResource("5_owa0i")])

[node name="StepPlayer" parent="Footsteps" index="0"]
bus = &"Master"

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CylinderShape3D_gnlxt")

[node name="PlayerCam" type="Node3D" parent="." node_paths=PackedStringArray("footsteps")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.6, 0)
script = ExtResource("2_cpvu0")
sensitivity = 0.2
footsteps = NodePath("../Footsteps")

[node name="Camera3D" type="Camera3D" parent="PlayerCam"]
current = true
fov = 90.0

[node name="InteractRay" type="RayCast3D" parent="PlayerCam/Camera3D"]
target_position = Vector3(0, 0, -2)
collision_mask = 7
hit_back_faces = false
collide_with_areas = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_kdkn7")
}

[node name="OmniLight3D" type="OmniLight3D" parent="."]
light_energy = 0.5
omni_range = 3.0

[editable path="Footsteps"]
