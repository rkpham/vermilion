[gd_scene load_steps=14 format=3 uid="uid://cpighcr4ai5b0"]

[ext_resource type="PackedScene" uid="uid://b2ii7eu32rlun" path="res://assets/models/apartments/doorframe/doorframe.glb" id="1_vpckq"]
[ext_resource type="Material" uid="uid://dgpup3kfg6spc" path="res://assets/models/apartments/doorframe/doorframe.tres" id="2_brg5q"]
[ext_resource type="PackedScene" uid="uid://i0ghw6n8smks" path="res://assets/models/apartments/door/door.tscn" id="3_s06f2"]
[ext_resource type="Script" path="res://scenes/objects/interactable.gd" id="4_5hdwu"]
[ext_resource type="Script" path="res://scenes/components/door_component.gd" id="5_aduys"]
[ext_resource type="AudioStream" uid="uid://duyne66o851a4" path="res://assets/audio/sfx/door/dooropen.ogg" id="6_sv03e"]
[ext_resource type="AudioStream" uid="uid://cb46slcqar8t1" path="res://assets/audio/sfx/door/doorclose.ogg" id="6_y56jx"]

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_c4k7k"]
data = PackedVector3Array(-0.8844, 2.3774, -0.0816, 1, 2.5, -0.0816, -1, 2.5, -0.0816, -0.8844, 2.3774, -0.0816, 0.8844, 2.3774, -0.0816, 1, 2.5, -0.0816, 0.8844, 2.3774, -0.0816, 1, 0, -0.0816, 1, 2.5, -0.0816, 0.8844, 2.3774, -0.0816, 0.8844, 0, -0.0816, 1, 0, -0.0816, -0.8844, 0, -0.0816, -1, 2.5, -0.0816, -1, 0, -0.0816, -0.8844, 0, -0.0816, -0.8844, 2.3774, -0.0816, -1, 2.5, -0.0816, 0.8844, 0, 0.0816, 0.8844, 2.3774, -0.0816, 0.8844, 2.3774, 0.0816, 0.8844, 0, 0.0816, 0.8844, 0, -0.0816, 0.8844, 2.3774, -0.0816, -1, 0, 0.0816, -1, 2.5, -0.0816, -1, 2.5, 0.0816, -1, 0, 0.0816, -1, 0, -0.0816, -1, 2.5, -0.0816, -1, 2.5, 0.0816, 1, 2.5, -0.0816, 1, 2.5, 0.0816, -1, 2.5, 0.0816, -1, 2.5, -0.0816, 1, 2.5, -0.0816, -0.8844, 2.3774, 0.0816, -0.8844, 0, -0.0816, -0.8844, 0, 0.0816, -0.8844, 2.3774, 0.0816, -0.8844, 2.3774, -0.0816, -0.8844, 0, -0.0816, 1, 2.5, 0.0816, 1, 0, -0.0816, 1, 0, 0.0816, 1, 2.5, 0.0816, 1, 2.5, -0.0816, 1, 0, -0.0816, 0.8844, 2.3774, 0.0816, -1, 2.5, 0.0816, 1, 2.5, 0.0816, 0.8844, 2.3774, 0.0816, -0.8844, 2.3774, 0.0816, -1, 2.5, 0.0816, -0.8844, 2.3774, 0.0816, -1, 0, 0.0816, -1, 2.5, 0.0816, -0.8844, 2.3774, 0.0816, -0.8844, 0, 0.0816, -1, 0, 0.0816, 0.8844, 0, 0.0816, 1, 2.5, 0.0816, 1, 0, 0.0816, 0.8844, 0, 0.0816, 0.8844, 2.3774, 0.0816, 1, 2.5, 0.0816, 0.8844, 2.3774, 0.0816, -0.8844, 2.3774, -0.0816, -0.8844, 2.3774, 0.0816, 0.8844, 2.3774, 0.0816, 0.8844, 2.3774, -0.0816, -0.8844, 2.3774, -0.0816)

[sub_resource type="Animation" id="Animation_e6lok"]
resource_name = "close"
length = 1.6
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../..:rotation")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0, 1.48353, 0), Vector3(0, 0, 0)]
}
tracks/1/type = "animation"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("../AnimationPlayer")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"clips": PackedStringArray(),
"times": PackedFloat32Array()
}
tracks/2/type = "audio"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("../DoorSounds")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"clips": [{
"end_offset": 0.0,
"start_offset": 0.0,
"stream": ExtResource("6_y56jx")
}],
"times": PackedFloat32Array(0.6)
}
tracks/2/use_blend = true

[sub_resource type="Animation" id="Animation_4ayms"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../..:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_l3u6f"]
resource_name = "open"
length = 1.8
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../..:rotation")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.4, 0.9),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, 1.48353, 0)]
}
tracks/1/type = "animation"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("../AnimationPlayer")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"clips": PackedStringArray("TurnHandle", "UnturnHandle"),
"times": PackedFloat32Array(0.025, 0.5)
}
tracks/2/type = "audio"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("../DoorSounds")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"clips": [{
"end_offset": 0.0,
"start_offset": 0.0,
"stream": ExtResource("6_sv03e")
}],
"times": PackedFloat32Array(0)
}
tracks/2/use_blend = true

[sub_resource type="AnimationLibrary" id="AnimationLibrary_j56vi"]
_data = {
"RESET": SubResource("Animation_4ayms"),
"close": SubResource("Animation_e6lok"),
"open": SubResource("Animation_l3u6f")
}

[sub_resource type="BoxShape3D" id="BoxShape3D_c0dx0"]
size = Vector3(1.32227, 2.37981, 0.092041)

[node name="Doorframe" instance=ExtResource("1_vpckq")]

[node name="Doorframe" parent="." index="0"]
material_override = ExtResource("2_brg5q")

[node name="StaticBody3D" type="StaticBody3D" parent="Doorframe" index="0"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Doorframe/StaticBody3D" index="0"]
shape = SubResource("ConcavePolygonShape3D_c4k7k")

[node name="DoorPivot" type="Node3D" parent="." index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.667, 0, 0)

[node name="Door" parent="DoorPivot" index="0" instance=ExtResource("3_s06f2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.667, 0, 0)

[node name="StaticBody3D" type="StaticBody3D" parent="DoorPivot/Door" index="2"]
script = ExtResource("4_5hdwu")

[node name="DoorComponent" type="Node3D" parent="DoorPivot/Door/StaticBody3D" index="0"]
script = ExtResource("5_aduys")

[node name="AnimationPlayer" type="AnimationPlayer" parent="DoorPivot/Door/StaticBody3D/DoorComponent" index="0"]
root_node = NodePath("../..")
libraries = {
"": SubResource("AnimationLibrary_j56vi")
}

[node name="CollisionShape3D" type="CollisionShape3D" parent="DoorPivot/Door/StaticBody3D" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.1899, 0)
shape = SubResource("BoxShape3D_c0dx0")

[node name="DoorSounds" type="AudioStreamPlayer3D" parent="DoorPivot/Door" index="3"]

[editable path="DoorPivot/Door"]
